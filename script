ALTER TABLE clips DROP CONSTRAINT clips_country_id_fkey;
ALTER TABLE clips DROP CONSTRAINT clips_performer_id_fkey;
ALTER TABLE clips DROP CONSTRAINT clips_style_id_fkey;
ALTER TABLE artists DROP CONSTRAINT artists_country_code_fkey;
ALTER TABLE voting DROP CONSTRAINT voting_clip_id_fkey;


drop table clips;
drop table artists ;
drop table styles;
drop table countries;

create table countries
(
	id serial primary key,
	code_id character varying(2) unique NOT NULL,
	name character varying(255) unique Not null
);

create table styles 
(
	id serial primary key,
	name character varying(255),
	description text
);

create table artists
(
	id serial primary key,
	name character varying(255) unique NOT NULL,
	site character varying(255),
	biography character varying(255),
	country_id integer,
  CONSTRAINT artists_country_code_fkey FOREIGN KEY (country_id )
      REFERENCES public.countries (id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION
);

create table clips 
(
  id serial primary key,
  name character varying(255) NOT NULL,
  url character varying(255) unique NOT NULL,
  artist_id integer,
  style_id integer,
  country_id integer,
  CONSTRAINT clips_country_id_fkey FOREIGN KEY (country_id)
      REFERENCES public.countries (id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT clips_performer_id_fkey FOREIGN KEY (artist_id)
      REFERENCES public.artists (id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT clips_style_id_fkey FOREIGN KEY (style_id)
      REFERENCES public.styles (id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT clips_unique_url UNIQUE (url)
);